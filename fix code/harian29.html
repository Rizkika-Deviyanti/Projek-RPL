<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily</title>
    <link rel="stylesheet" href="harian.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <nav class="navbar">
        <div class="navbar-logo">
            <img src="TomoHi.jpeg">
            <div class="navbar-text">
                <span class="title">Hi Friend!</span>
                <span class="subtitle">Let's talk with Tomo</span>
            </div>
        </div>
        
        <div class="all">
            <div class="navbar-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <div class="navbar-menu" id="navbar-menu">
                <a href="profil.html" class="home">Home</a>
                <a href="statistic.html" class="stat">Statistic</a>   
            </div>
            <div class="profile-icon-container" id="profile-icon-container">
                <img src="kosong.jpg" alt="Profile" class="profile-img" id="profile-icon"> <!--berubah saat user ganti foto-->
                <div class="menu" id="menu">
                    <div class="sub-menu">
                        <div class="info">
                            <img src="kosong.jpg" class="prof-menu">
                            <h2>Username</h2> <!--nanti ubah biar otomatis nama username pas login-->
                        </div>
                        <hr>
        
                        <a href="edit.html" class="sub-menu-link">
                         <i class='bx bxs-user icon'></i>
                         <p>Edit Profil</p>
                         <span></span>
                        </a>
        
                        <a href="logout.html" class="sub-menu-link"> <!--buat biar bisa logout-->
                         <i class='bx bxs-log-out icon'></i>
                         <p>Logout</p>
                         <span></span>
                        </a>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </nav>
    
    <div class="kotak"></div>
    <div class="kotak2"></div>
    <p class="tulisan"> LET'S FILL YOUR MONTHS WITH STORY </p>
    <div class="day">
        <button onclick="window.location.href='jurnal.html'">1</button>
        <button onclick="window.location.href='jurnal.html'">2</button>
        <button onclick="window.location.href='jurnal.html'">3</button>
        <button onclick="window.location.href='jurnal.html'">4</button>
        <button onclick="window.location.href='jurnal.html'">5</button>
        <button onclick="window.location.href='jurnal.html'">6</button>
        <button onclick="window.location.href='jurnal.html'">7</button>
        <button onclick="window.location.href='jurnal.html'">8</button>
        <button onclick="window.location.href='jurnal.html'">9</button>
        <button onclick="window.location.href='jurnal.html'">10</button>
        <button onclick="window.location.href='jurnal.html'">11</button>
        <button onclick="window.location.href='jurnal.html'">12</button>
        <button onclick="window.location.href='jurnal.html'">13</button> 
        <button onclick="window.location.href='jurnal.html'">14</button>
        <button onclick="window.location.href='jurnal.html'">15</button>
        <button onclick="window.location.href='jurnal.html'">16</button>
        <button onclick="window.location.href='jurnal.html'">17</button>
        <button onclick="window.location.href='jurnal.html'">18</button>
        <button onclick="window.location.href='jurnal.html'">19</button>
        <button onclick="window.location.href='jurnal.html'">20</button>
        <button onclick="window.location.href='jurnal.html'">21</button>
        <button onclick="window.location.href='jurnal.html'">22</button>
        <button onclick="window.location.href='jurnal.html'">23</button>
        <button onclick="window.location.href='jurnal.html'">24</button>
        <button onclick="window.location.href='jurnal.html'">25</button> 
        <button onclick="window.location.href='jurnal.html'">26</button> 
        <button onclick="window.location.href='jurnal.html'">27</button> 
        <button onclick="window.location.href='jurnal.html'">28</button> 
        <button onclick="window.location.href='jurnal.html'">29</button>     
    </div>
    <div class="popup" id="popup">
        <div class="popup-box">
            <div class="Rectangle26"></div>
            <div class="thank">Thank you</div>
            <div class="text2">for opening your heart<br>and sharing your story<br>with me.</div>   
        </div>
        <!--popup-->
        <svg width="315" height="299" viewBox="0 0 315 299" fill="none" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="154.5" cy="202.5" rx="115.5" ry="30.5" fill="#E8CFBB"/>
            <path d="M256 100C256 154.671 211.457 199 156.5 199C101.543 199 57 154.671 57 100C57 45.3285 101.543 1 156.5 1C211.457 1 256 45.3285 256 100Z" fill="#FFD068" stroke="#342705" stroke-width="2"/>
            <path d="M132.5 36.5L141 43.5L126.5 51" stroke="black" stroke-width="2" stroke-linecap="round"/>
            <path d="M178.5 37L170 44L184.5 51.5" stroke="black" stroke-width="2" stroke-linecap="round"/>
            <path d="M59 119C83 221 225 228.5 254 119.5C109.5 219 54.3633 106.5 59 119Z" fill="#E2BB66"/>
            <path d="M149 189.5C149 205.706 134.54 219 116.5 219C98.4604 219 84 205.706 84 189.5C84 173.294 98.4604 160 116.5 160C134.54 160 149 173.294 149 189.5Z" fill="#E2BB66" stroke="#342705" stroke-width="2"/>
            <path d="M230 189.5C230 205.72 215.749 219 198 219C180.251 219 166 205.72 166 189.5C166 173.28 180.251 160 198 160C215.749 160 230 173.28 230 189.5Z" fill="#E2BB66" stroke="#342705" stroke-width="2"/>
            <mask id="path-8-inside-1_276_939" fill="white">
            <path d="M146 51.5278C146 52.779 146.272 54.0179 146.799 55.1739C147.327 56.3299 148.1 57.3802 149.075 58.2649C150.05 59.1497 151.208 59.8515 152.482 60.3303C153.756 60.8091 155.121 61.0556 156.5 61.0556C157.879 61.0556 159.244 60.8091 160.518 60.3303C161.792 59.8515 162.95 59.1497 163.925 58.2649C164.9 57.3802 165.673 56.3299 166.201 55.1739C166.728 54.0179 167 52.779 167 51.5278L156.5 51.5278H146Z"/>
            </mask>
            <path d="M146 51.5278C146 52.779 146.272 54.0179 146.799 55.1739C147.327 56.3299 148.1 57.3802 149.075 58.2649C150.05 59.1497 151.208 59.8515 152.482 60.3303C153.756 60.8091 155.121 61.0556 156.5 61.0556C157.879 61.0556 159.244 60.8091 160.518 60.3303C161.792 59.8515 162.95 59.1497 163.925 58.2649C164.9 57.3802 165.673 56.3299 166.201 55.1739C166.728 54.0179 167 52.779 167 51.5278L156.5 51.5278H146Z" fill="#F47D7D" stroke="#342705" stroke-width="4" mask="url(#path-8-inside-1_276_939)"/>
            <path d="M134 85.6137C152.186 74.8575 161.968 76.0852 179 85.6137" stroke="black" stroke-linecap="round"/>
            <path d="M20.2312 59.6975C25.2278 55.3811 32.4976 54.4336 40.3784 56.6374C48.2493 58.8384 56.5865 64.1582 63.4665 72.1223C70.3465 80.0865 74.3984 89.1081 75.4325 97.2153C76.4678 105.333 74.474 112.388 69.4775 116.704C64.4809 121.02 57.2111 121.968 49.3303 119.764C41.4594 117.563 33.1222 112.243 26.2422 104.279C19.3622 96.3151 15.3102 87.2935 14.2762 79.1863C13.2408 71.0689 15.2346 64.0139 20.2312 59.6975Z" fill="#FFD068" stroke="#342705" stroke-width="2.29578"/>
            <path d="M294.137 59.5428C289.106 55.2677 281.828 54.38 273.966 56.6486C266.113 58.9143 257.82 64.3025 251.006 72.323C244.192 80.3435 240.214 89.3982 239.247 97.5136C238.278 105.639 240.33 112.678 245.362 116.953C250.394 121.228 257.671 122.116 265.534 119.847C273.386 117.581 281.679 112.193 288.494 104.173C295.308 96.152 299.285 87.0973 300.253 78.9819C301.221 70.8563 299.169 63.8179 294.137 59.5428Z" fill="#FFD068" stroke="#342705" stroke-width="2.29578"/>
        </svg>
    </div>
    <script>
        const mobileMenu = document.getElementById('mobile-menu');
        const navbarMenu = document.getElementById('navbar-menu');
        const profileIcon = document.getElementById('profile-icon');
        const menu = document.getElementById("menu");

        mobileMenu.addEventListener('click', () => {
            navbarMenu.classList.toggle('active');
            menu.classList.remove('open-class'); // Tutup menu profil saat toggle menu diklik
        });

        profileIcon.addEventListener('click', () => {
            menu.classList.toggle('open-class'); // Toggle menu profil saat ikon profil diklik
            navbarMenu.classList.remove('active'); // Tutup toggle menu saat ikon profil diklik
        });

        // Tutup menu profil saat pengguna mengklik di luar area menu
        window.onclick = function(event) {
            if (!event.target.matches('#profile-icon')) {
                if (menu.classList.contains('open-class')) {
                    menu.classList.remove('open-class');
                }
            }
        };

        //Tanda warna kuning sudah terisi di button
        fetch('/api/diary-status')// Buat permintaan ke server untuk mengambil status diary untuk setiap hari
            .then(response => response.json())
            .then(diaryStatus => {
                // Sekarang, diaryStatus berisi objek yang berisi status diary untuk setiap hari
                // Mari kita gunakan informasi ini untuk mengubah warna tombol hari di halaman HTML

                const buttons = document.querySelectorAll('.day button');
                buttons.forEach(button => {
                    const day = parseInt(button.id.replace('day', ''));
                    if (diaryStatus[day]) {
                        button.style.backgroundColor = '#FFC033'; // Diary untuk hari tersebut sudah terisi
                    }
                });
            })
            .catch(error => console.error('Error fetching diary status:', error));

        //Popup
        const urlParams = new URLSearchParams(window.location.search);
        const popup = urlParams.get('popup');

        if (popup === 'true') {
            // Show the popup only if it's not already shown
            if (!sessionStorage.getItem('popupShown')) {
                showPopup();
                // Set sessionStorage to indicate that the popup has been shown
                sessionStorage.setItem('popupShown', 'true');
            }
        }
        //masih salah anjingggggg
        window.onload = function() {
            var popupShown = sessionStorage.getItem('popupShown');
                if (!popupShown) {
                    showPopup();
                    sessionStorage.setItem('popupShown', 'true'); // Set sessionStorage untuk menandai bahwa popup telah ditampilkan
                    setTimeout(hidePopup, 3000); // Hide popup after 3 seconds (3000 milliseconds)
                }
            };

        // Fungsi untuk menampilkan popup
        function showPopup() {
            var popup = document.getElementById("popup");
            popup.style.display = "block"; // Tampilkan popup
        }

        // Fungsi untuk menyembunyikan popup
        function hidePopup() {
            var popup = document.getElementById("popup");
            popup.style.display = "none"; // Sembunyikan popup
        }
    </script>
    <footer></footer>
</body>
</html>
